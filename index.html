<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ–∑—é–º–µ - –ò–ª—å—è –ñ–∞—Ä–∏–∫–æ–≤ | –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –∏–≥—Ä</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        /* –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏ –ø—Ä–∏ –ø–µ—á–∞—Ç–∏ */
        @media print {
            .no-print {
                display: none !important;
            }
        }
    </style>
</head>
<body>
    <div class="resume-container" id="resume">
        <div class="header">
            <h1><span class="editable-field" data-key="name">–ò–ª—å—è –ñ–∞—Ä–∏–∫–æ–≤</span></h1>
            <p><span class="editable-field" data-key="position">Game Developer</span> | 
               <span class="editable-field" data-key="specialization">Unity/Unreal Engine</span></p>
        </div>
        
        <div class="content">
            <div class="left-column">
                <div class="section">
                    <h2>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
                    <p>üìß <span class="editable-field" data-key="email">iliazh06@gmail.com</span></p>
                    <p>üì± <span class="editable-field" data-key="phone">+7 (913) 944-7914</span></p>
                    <p>üìç <span class="editable-field" data-key="location">–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫</span></p>
                </div>
                
                <div class="section">
                    <h2>–ù–∞–≤—ã–∫–∏</h2>
                    <div class="skills-container">
                        <div class="skill-item">
                            <span class="skill-badge editable-field" data-key="skill1">Unity</span>
                            <span class="skill-badge editable-field" data-key="skill2">C#</span>
                            <span class="skill-badge editable-field" data-key="skill3">3D Modeling</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="right-column">
                <div class="section">
                    <h2>–û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã</h2>
                    <div class="game-project">
                        <h3><span class="editable-field" data-key="job1-title">Lead Game Developer</span></h3>
                        <p class="editable-field" data-key="job1-period">2021 - –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è</p>
                        <p class="editable-field" data-key="job1-company">GameDev Studio</p>
                        <ul>
                            <li><span class="editable-field" data-key="job1-desc1">–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ core-–º–µ—Ö–∞–Ω–∏–∫ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–π RPG</span></li>
                            <li><span class="editable-field" data-key="job1-desc2">–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</span></li>
                        </ul>
                    </div>
                </div>
                
                <div class="section">
                    <h2>–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</h2>
                    <p><span class="editable-field" data-key="edu-degree">–ë–∞–∫–∞–ª–∞–≤—Ä –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã—Ö –Ω–∞—É–∫</span></p>
                    <p><span class="editable-field" data-key="edu-university">–°–∏–±–ì–£–¢–ò</span>, 
                       <span class="editable-field" data-key="edu-years">2014-2018</span></p>
                </div>
            </div>
        </div>
    </div>

    <div class="buttons no-print">
        <button class="download-btn" id="download-pdf">–°–∫–∞—á–∞—Ç—å PDF</button>
        <button class="download-btn" id="save-changes">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    </div>

    <div class="loader" id="loader">
        <div class="spinner"></div>
        <p>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF...</p>
    </div>

    <script>
        // –í–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª–µ–π
        document.querySelectorAll('.editable-field').forEach(el => {
            el.addEventListener('click', (e) => {
                e.stopPropagation();
                el.setAttribute('contenteditable', 'true');
                el.focus();
            });
            
            el.addEventListener('blur', () => {
                el.removeAttribute('contenteditable');
                // –ü—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:
                // localStorage.setItem(el.dataset.key, el.textContent);
            });
        });

        // –£–ª—É—á—à–µ–Ω–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç –≤ PDF
        document.getElementById('download-pdf').addEventListener('click', () => {
            const loader = document.getElementById('loader');
            const element = document.getElementById('resume');
            
            loader.classList.add('active');
            
            // –í—Ä–µ–º–µ–Ω–Ω–æ —Å–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–¥ —ç–∫—Å–ø–æ—Ä—Ç–æ–º
            const buttons = document.querySelector('.buttons');
            buttons.style.visibility = 'hidden';
            
            const opt = {
                margin: 10,
                filename: 'GameDev_Resume.pdf',
                image: { type: 'jpeg', quality: 0.95 },
                html2canvas: { 
                    scale: 2,
                    useCORS: true,
                    letterRendering: true,
                    allowTaint: true,
                    logging: true
                },
                jsPDF: { 
                    unit: 'mm', 
                    format: 'a4', 
                    orientation: 'portrait',
                    hotfixes: ["px_scaling"] 
                },
                pagebreak: { mode: 'avoid-all' }
            };
            
            setTimeout(() => {
                html2pdf()
                    .set(opt)
                    .from(element)
                    .save()
                    .then(() => {
                        loader.classList.remove('active');
                        buttons.style.visibility = 'visible';
                    });
            }, 300);
        });

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–∑–∞–≥–ª—É—à–∫–∞)
        document.getElementById('save-changes').addEventListener('click', () => {
            alert('–ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ');
            document.querySelectorAll('.editable-field').forEach(el => {
                localStorage.setItem(el.dataset.key, el.textContent);
            });
        });

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã)
        window.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.editable-field').forEach(el => {
                const savedValue = localStorage.getItem(el.dataset.key);
                if (savedValue) el.textContent = savedValue;
            });
        });
    </script>
</body>
</html>
